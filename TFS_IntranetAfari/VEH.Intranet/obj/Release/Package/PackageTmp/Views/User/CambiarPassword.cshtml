@model VEH.Intranet.ViewModel.User.AddEditUsuarioViewModel
@{
    ViewBag.Title = "Cambiar contraseña";
}

<div class="panel panel-inverse">
    <div class="panel-body">
        <form method="post" class="form-horizontal">
            @Html.HiddenFor(x => x.UsuarioId)
            @Html.HiddenFor(x => x.EdificioId)
            @Html.HiddenFor(x => x.DepartamentoId)
            @Html.HiddenFor(x => x.TipoUsuario)
            <div class="form-group">
                <label class="col-md-2 control-label">Nombres</label>
                <div class="col-md-3" style="margin-top:8px;">
                    <strong>@Html.DisplayFor(x => x.Nombres)</strong>   
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">Apellidos</label>
                <div class="col-md-3" style="margin-top:8px;">
                 <strong>@Html.DisplayFor(x => x.Apellidos)</strong>   
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">Contraseña anterior</label>
                <div class="col-md-4" style="margin-top:8px;">
                    <strong><em>@Html.DisplayFor(x => x.Password)</em></strong>  
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">Contraseña nueva</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.PasswordNuevo, new { @class = "form-control  m-b-5", name = "password-visible", id = "password-indicator-visible" })
                    <div id="passwordStrengthDiv2" class="is0 m-t-5"></div>
                    @Html.ValidationMessageFor(x => x.PasswordNuevo)
                </div>
            </div>
            <hr />
            <div class="form-group">
                <div class="ui-sortable">
                    <button type="submit" class="btn btn-sm btn-primary m-r-10 pull-right"><i class="fa fa-save"></i>&nbsp;&nbsp;Guardar</button>
                    <a href="@Url.Action("Dashboard", "Home")" class="btn btn-sm btn-default m-r-5 pull-right"><i class="fa fa-arrow-left"></i>&nbsp;&nbsp;Cancelar</a>
                </div>
            </div>
        </form>
    </div>
</div>


@section scripts{   
    <script>
        $(document).ready(function () {

            var handleFormPasswordIndicator = function () {
                "use strict";
                $("#password-indicator-visible").passwordStrength({ targetDiv: "#passwordStrengthDiv2" })
            };
            var FormPlugins = function () { "use strict"; return { init: function () { handleFormPasswordIndicator(); } } }()
            FormPlugins.init();

            $("#Codigo").change(function (e) {
                e.preventDefault()
                $.ajax({
                    cache: false,
                    type: "GET",
                    url: "@Url.Action("VerificarCodigoUsuario")",
                    data: { "codigo": this.value },
                    success: function (data) {
                        $("#spUsuarioExiste").empty().html("")
                        if (!data) { $("#spUsuarioExiste").html('<i class="fa fa-times"></i> <span style="color:#e5603b"> El código de usuario ya existe</span>') }
                        else { $("#spUsuarioExiste").html('<i class="fa fa-check"></i> <span style="color:#7cdda7"> El código de usuario esta disponible</span>') }
                    }
                })
            })
        })
    </script>
}