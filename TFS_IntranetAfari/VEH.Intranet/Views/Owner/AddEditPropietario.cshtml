@model VEH.Intranet.ViewModel.Owner.AddEditPropietarioViewModel

@{
    ViewBag.Title = (Model.PropietarioId != null ? "Editar" : "Agregar") + " propietario";
}

@section Breadcrumbs{
    <li><a href="@Url.Action("LstEdificio", "Building")">Edificio</a></li>
    <li><a href="@Url.Action("LstDepartamento", "Departament", new { EdificioId = Model.Edificio.EdificioId })">Departamento</a></li>
    <li><a href="@Url.Action("LstPropietario", "Owner", new { DepartamentoId = Model.DepartamentoId, EdificioId = Model.EdificioId })">Propietario</a></li>
}

<div class="row">
    <div class="col-sm-12">
        <div class="panel panel-inverse">
            <div class="panel-body">
                <h4><i class="fa fa-building-o"></i>&nbsp;Edificio</h4>
                <dl class="dl-horizontal">
                    <dt>Nombre</dt>
                    <dd>@Model.Edificio.Nombre</dd>
                </dl>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-sm-12">
        <div class="panel panel-inverse">
            <div class="panel-body">
                <h4><i class="fa fa-desktop"></i>&nbsp;Departamento</h4>
                <dl class="dl-horizontal">
                    <dt>Número</dt>
                    <dd>@Model.Departamento.Numero</dd>
                    <dt>Piso</dt>
                    <dd>@Model.Departamento.Piso</dd>
                </dl>
            </div>
        </div>
    </div>
</div>

<div class="panel panel-inverse">
    <div class="panel-body">
        <form method="post" class="form-horizontal">
            @Html.HiddenFor(x => x.PropietarioId)
            @Html.HiddenFor(x => x.EdificioId)
            @Html.HiddenFor(x => x.DepartamentoId)
            @Html.HiddenFor(x => x.MostrarRUC)
            <h3>Datos propietario:</h3>

            <div class="form-group">
                <label class="col-md-2 control-label">Nombres</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.Nombres, new { @class = "form-control" })
                    @Html.ValidationMessageFor(x => x.Nombres)
                </div>
                <div class="col-md-4">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" id="chbx-rz" />
                            Aplica razón social
                        </label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">Fecha Creación (dd/MM/yyyy)</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.FechaCreacion, new { @class = "form-control" })
                </div>
            </div>
            <div class="form-group" id="rs" style="display:none">
                <label class="col-md-2 control-label">Razón Social</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.RazonSocial, new { @class = "form-control", @maxlength = "200" })
                </div>
                <div class="col-md-4">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" id="chbx-ruc" />
                            Aplica RUC
                        </label>
                    </div>
                </div>
            </div>
            <div class="form-group" id="ruc" style="display:none">
                <label class="col-md-2 control-label">RUC</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.RUC, new { @class = "form-control", @maxlength = "200" })
                </div>
                <div class="col-md-4">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" id="chbx-mostrar" />
                            Mostrar en recibo
                        </label>
                    </div>
                </div>
            </div>
            @*@Html.EditorFor(x => x.ApellidoMaterno)
        @Html.EditorFor(x => x.ApellidoPaterno)*@
            <div class="form-group">
                <label class="col-md-2 control-label">Tipo de documento</label>
                <div class="col-md-4">
                    @Html.DropDownListFor(x => x.TipoDocumento, ConstantHelpers.ObtenerComboTipoDocumento(), "[-Seleccione-]", new { @class = "form-control" })
                    @Html.ValidationMessageFor(x => x.TipoDocumento)
                </div>
            </div>
            @Html.EditorFor(x => x.NroDocumento, new { ancho = "3" })
            @*<div class="form-group">
            <label class="col-md-2 control-label">Fecha de nacimiento</label>
            <div class="col-md-6">
                @Html.DateTextBoxFor(x => x.FechaNacimiento, new { @class = "form-control" })
                @Html.ValidationMessageFor(x => x.FechaNacimiento)
            </div>
        </div>*@

            @Html.EditorFor(x => x.Cargo)

            <div class="form-group">
                <label class="col-md-2 control-label">Celular</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.Celular, new { @class = "form-control" })
                    @Html.ValidationMessageFor(x => x.Celular)
                </div>
            </div>


            <div class="form-group">
                <label class="col-md-2 control-label">Teléfono</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.Telefono, new { @class = "form-control" })
                    @Html.ValidationMessageFor(x => x.Telefono)
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-2 control-label">Email</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.Email, new { @class = "form-control" })
                    @Html.ValidationMessageFor(x => x.Email)
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-2 control-label">Contacto</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.ContactoPropietario, new { @class = "form-control" })
                    @Html.ValidationMessageFor(x => x.ContactoPropietario)
                </div>
            </div>


            <div class="form-group">
                <label class="col-md-2 control-label">Poseedor</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.Poseedor, new { @class = "form-control" })
                    @Html.ValidationMessageFor(x => x.Poseedor)
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">Parentesco con Titular</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.Parentesco, new { @class = "form-control" })
                    @Html.ValidationMessageFor(x => x.Poseedor)
                </div>
            </div>

            <hr />
            <h4>Datos inquilino:</h4>
            <h6>(dejar vacio si no aplica)</h6>

            @*<div class="form-group">
            <label class="col-md-2 control-label">Nombres</label>
            <div class="col-md-4">
                @Html.TextBoxFor(x => x.NombresInq, new { @class = "form-control" })
                @Html.ValidationMessageFor(x => x.NombresInq)
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-2 control-label">DNI</label>
            <div class="col-md-4">
                @Html.TextBoxFor(x => x.DniInquilino, new { @class = "form-control" })
                @Html.ValidationMessageFor(x => x.DniInquilino)
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-2 control-label">Teléfono</label>
            <div class="col-md-4">
                @Html.TextBoxFor(x => x.TelefonoInq, new { @class = "form-control" })
                @Html.ValidationMessageFor(x => x.TelefonoInq)
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-2 control-label">Celular</label>
            <div class="col-md-4">
                @Html.TextBoxFor(x => x.CelularInq, new { @class = "form-control" })
                @Html.ValidationMessageFor(x => x.CelularInq)
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-2 control-label">Email</label>
            <div class="col-md-4">
                @Html.TextBoxFor(x => x.EmailInq, new { @class = "form-control" })
                @Html.ValidationMessageFor(x => x.EmailInq)
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-2 control-label">Contacto</label>
            <div class="col-md-4">
                @Html.TextBoxFor(x => x.ContactoInquilino, new { @class = "form-control" })
                @Html.ValidationMessageFor(x => x.ContactoInquilino)
            </div>
            <div class="col-md-4">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" id="chbx-rz-inq" />
                        Aplica razón social
                    </label>
                </div>
            </div>
        </div>
        <div class="form-group" id="rs-inq" style="display:none">
            <label class="col-md-2 control-label">Razón Social</label>
            <div class="col-md-4">
                @Html.TextBoxFor(x => x.RazonSocialInq, new { @class = "form-control", @maxlength = "200" })
            </div>
            <div class="col-md-4">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" id="chbx-ruc-inq" />
                        Aplica RUC
                    </label>
                </div>
            </div>
        </div>
        <div class="form-group" id="ruc-inq" style="display:none">
            <label class="col-md-2 control-label">RUC</label>
            <div class="col-md-4">
                @Html.TextBoxFor(x => x.RUCInq, new { @class = "form-control", @maxlength = "200" })
            </div>
            <div class="col-md-4">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" id="chbx-mostrar-inq" />
                        Mostrar en recibo
                    </label>
                </div>
            </div>
        </div>*@
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th class="col-sm-2 text-center">Nombres</th>
                            <th class="col-sm-1 text-center">DNI</th>
                            <th class="col-sm-1 text-center">Teléfono</th>
                            <th class="col-sm-1 text-center">Celular</th>
                            <th class="col-sm-1 text-center">Email</th>
                            <th class="col-sm-1 text-center">RUC</th>
                            <th class="col-sm-1 text-center">Razón Social</th>
                            <th class="col-sm-2 text-center">Opciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.LstInquilino)
                        {
                            <tr>
                                <td class="text-center">@item.Nombres</td>
                                <td class="text-center">@item.Dni</td>
                                <td class="text-center">@item.Telefono</td>
                                <td class="text-center">@item.Celular</td>
                                <td class="text-center">@item.Email</td>
                                <td class="text-center">@item.RUC</td>
                                <td class="text-center">@item.RazonSocial</td>
                                <td class="text-center">
                                    <a @Data.ModalLink("_AddEditInquilino", "Owner", new { PropietarioId = item.PropietarioId, DepartamentoId = Model.DepartamentoId, EdificioId = Model.EdificioId, InquilinoId = item.InquilinoId }) class="btn btn-default btn-xs"><i class="fa fa-pencil"></i>&nbsp;&nbsp;Editar</a>
                                    <a href="@Url.Action("DeleteInquilino", "Owner", new { PropietarioId = item.PropietarioId, DepartamentoId = Model.DepartamentoId, EdificioId = Model.EdificioId, InquilinoId = item.InquilinoId  })" class="btn btn-default btn-xs"><i class="fa fa-trash-o"></i>&nbsp;&nbsp;Eliminar</a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                @if (Model.PropietarioId.HasValue)
                {
                    <a @Data.ModalLink("_AddEditInquilino", "Owner", new { PropietarioId = Model.PropietarioId, DepartamentoId = Model.DepartamentoId, EdificioId = Model.EdificioId }) class="btn btn-primary btn-xs"><i class="fa fa-pencil"></i>&nbsp;&nbsp;Agregar Inquilino</a>
                }
            </div>
            <hr />
            <div class="form-group">
                <div class="ui-sortable">
                    <button type="submit" class="btn btn-sm btn-primary m-r-10 pull-right"><i class="fa fa-save"></i>&nbsp;&nbsp;Guardar</button>
                    <a href="@Url.Action("LstPropietario", "Owner", new { DepartamentoId = Model.DepartamentoId, EdificioId = Model.EdificioId })" class="btn btn-sm btn-default m-r-5 pull-right"><i class="fa fa-arrow-left"></i>&nbsp;&nbsp;Cancelar</a>
                </div>
            </div>
        </form>
    </div>
</div>
@section Scripts{
    <script>
        @if (!String.IsNullOrEmpty(Model.RazonSocial))
        {
            @:$('#chbx-rz').trigger('click');
            @:$('#rs').show();
        }
        $('#chbx-rz').click(function () {
            var $this = $(this);
            if ($this.is(':checked')) {
                $('#rs').show();
            }
            else {
                $('#rs').hide();
                $('#RazonSocial').val(null);
            }
        });
        @if (!String.IsNullOrEmpty(Model.RUC))
        {
            @:$('#chbx-ruc').trigger('click');
            @:$('#ruc').show();
        }
        $('#chbx-ruc').click(function () {
            var $this = $(this);
            if ($this.is(':checked')) {
                $('#ruc').show();
            }
            else {
                $('#ruc').hide();
                $('#RUC').val(null);
            }
        });
        @if (Model.MostrarRUC)
        {
            @:$('#chbx-mostrar').trigger('click');
        }
        $('#chbx-mostrar').click(function () {
            var $this = $(this);
            if ($this.is(':checked')) {
                $('#MostrarRUC').val(true);
            }
            else {
                $('#MostrarRUC').val(false);
            }
        });
    </script>
    <script>
        @if (!String.IsNullOrEmpty(Model.RazonSocialInq))
        {
            @:$('#chbx-rz-inq').trigger('click');
            @:$('#rs-inq').show();
        }
        $('#chbx-rz-inq').click(function () {
            var $this = $(this);
            if ($this.is(':checked')) {
                $('#rs-inq').show();
            }
            else {
                $('#rs-inq').hide();
                $('#RazonSocialInq').val(null);
            }
        });
        @if (!String.IsNullOrEmpty(Model.RUCInq))
        {
            @:$('#chbx-ruc-inq').trigger('click');
            @:$('#ruc-inq').show();
        }
        $('#chbx-ruc-inq').click(function () {
            var $this = $(this);
            if ($this.is(':checked')) {
                $('#ruc-inq').show();
            }
            else {
                $('#ruc-inq').hide();
                $('#RUCInq').val(null);
            }
        });
        @if (Model.MostrarRUCInq)
        {
            @:$('#chbx-mostrar-inq').trigger('click');
        }
        $('#chbx-mostrar-inq').click(function () {
            var $this = $(this);
            if ($this.is(':checked')) {
                $('#MostrarRUCInq').val(true);
            }
            else {
                $('#MostrarRUCInq').val(false);
            }
        });
    </script>
}